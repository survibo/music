<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player with Controls</title>
</head>
<body>
    <h1>Music Player</h1>
    <p>Press <strong>Spacebar</strong> to play or pause.</p>
    <p>Move with <strong>←</strong>, <strong>→</strong> or use the buttons below.</p>
    <p>Press <strong>M</strong> to toggle mute.</p>
    <p><strong>Previous Song:</strong> <span id="previousSong">None</span></p>
    <p><strong>Currently Playing:</strong> <span id="currentSong">None</span></p>
    <p><strong>Next Song:</strong> <span id="nextSong">None</span></p>
    <p><strong>Volume:</strong> <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1"></p>
    <p><strong>Status:</strong> <span id="status">Stopped</span></p>
    <p><strong>Time:</strong> <span id="currentTime">0:00</span> / <span id="duration">0:00</span></p>

    <button id="previousButton">Previous</button>
    <button id="playPauseButton">Play/Pause</button>
    <button id="stopButton">Stop</button>
    <button id="nextButton">Next</button>

    <h2>Song List</h2>
    <ul id="songList">
        <!-- Songs will be displayed here -->
    </ul>

    <script>
        const songs = [
            { file: "Disney - 100 Years of Wonder Intro.mp3", displayName: "Disney Opening" },
            { file: "d.mp3", displayName: "놀기 BGM" },
            { file: "troll.mp3", displayName: "트롤 굴러가는 효과음" }
        ];

        let currentSongIndex = 0;
        let audio = new Audio();
        audio.preload = 'auto';
        let isMuted = false;

        const currentSongElement = document.getElementById("currentSong");
        const previousSongElement = document.getElementById("previousSong");
        const nextSongElement = document.getElementById("nextSong");
        const statusElement = document.getElementById("status");
        const currentTimeElement = document.getElementById("currentTime");
        const durationElement = document.getElementById("duration");
        const songListElement = document.getElementById("songList");
        const volumeControl = document.getElementById("volumeControl");
        const playPauseButton = document.getElementById("playPauseButton");

        // Populate the song list
        songs.forEach(song => {
            const li = document.createElement("li");
            li.textContent = song.displayName;
            songListElement.appendChild(li);
        });

        function updateSongInfo() {
            previousSongElement.textContent = songs[currentSongIndex - 1]?.displayName || "None";
            currentSongElement.textContent = songs[currentSongIndex]?.displayName || "None";
            nextSongElement.textContent = songs[currentSongIndex + 1]?.displayName || "None";
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secondsLeft = Math.floor(seconds % 60);
            return `${minutes}:${secondsLeft < 10 ? '0' : ''}${secondsLeft}`;
        }

        function loadSong(index) {
            audio.src = songs[index].file;
            audio.play();
            statusElement.textContent = "Playing";
            audio.addEventListener('loadedmetadata', () => {
                durationElement.textContent = formatTime(audio.duration);
            });
            updateSongInfo();
        }

        function playNextSong() {
            if (currentSongIndex < songs.length - 1) {
                currentSongIndex++;
                loadSong(currentSongIndex);
            } else {
                statusElement.textContent = "Stopped";
            }
        }

        function playPreviousSong() {
            if (currentSongIndex > 0) {
                currentSongIndex--;
                loadSong(currentSongIndex);
            }
        }

        function togglePlayPause() {
            if (audio.paused) {
                audio.play();
                statusElement.textContent = "Playing";
                playPauseButton.textContent = "Pause";
            } else {
                audio.pause();
                statusElement.textContent = "Paused";
                playPauseButton.textContent = "Play";
            }
        }

        function stopSong() {
            audio.pause();
            audio.currentTime = 0;
            statusElement.textContent = "Stopped";
            playPauseButton.textContent = "Play";
        }

        document.getElementById("previousButton").addEventListener("click", playPreviousSong);
        document.getElementById("nextButton").addEventListener("click", playNextSong);
        document.getElementById("playPauseButton").addEventListener("click", togglePlayPause);
        document.getElementById("stopButton").addEventListener("click", stopSong);

        volumeControl.addEventListener("input", (event) => {
            audio.volume = event.target.value;
        });

        updateSongInfo();
    </script>
</body>
</html>
