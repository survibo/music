<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player with Controls</title>
</head>
<body>
    <h1>Music Player</h1>
    <p>Press <strong>Spacebar</strong> to play the next song.</p>
    <p>Press <strong>M</strong> to toggle mute.</p>
    <p><strong>Currently Playing:</strong> <span id="currentSong">None</span></p>
    <p><strong>Next Song:</strong> <span id="nextSong">None</span></p>
    <p><strong>Volume:</strong> <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1"></p>
    <p><strong>Status:</strong> <span id="status">Stopped</span></p>
    <p><strong>Time:</strong> <span id="currentTime">0:00</span> / <span id="duration">0:00</span></p>

    <script>
    // List of songs with custom display names
    const songs = [
        { file: "Disney - 100 Years of Wonder Intro (1080p HD) [ ezmp3.cc ] (1).mp3", displayName: "Disney Opening" },
        { file: "Do you want to build a snow man 편집본.wav", displayName: "Do you want to build a snowman" },
        { file: "For the first time in forever 편집본 2.wav", displayName: "For the first time in forever" },
        { file: "Love is an open door 편집본.wav", displayName: "Love is an open door" },
        { file: "베토벤-교향곡-5번-운명-1악장 (2).mp3", displayName: "따다다단 효과음" },
        { file: "https://drive.google.com/file/d/1xMMz8EZ4XU8ETtbZwKj6XhN4Ovn1gSK7/view?usp=sharing", displayName: "Let it go" },
        { file: "문닫는 소리.wav", displayName: "문닫는 효과음" },
        { file: "바람 효과음.mp3", displayName: "바람 효과음" },
        { file: "In summer.mp3", displayName: "In summer" }
    ];

    let currentSongIndex = 0; // Track the current song index
    let audio = new Audio(); // Create an audio object
    audio.preload = 'auto';  // Set preload to 'auto' to pre-load the audio file

    let isMuted = false; // Track mute state

    // HTML elements to display current and next song
    const currentSongElement = document.getElementById("currentSong");
    const nextSongElement = document.getElementById("nextSong");
    const statusElement = document.getElementById("status"); // Status element
    const currentTimeElement = document.getElementById("currentTime"); // Current time element
    const durationElement = document.getElementById("duration"); // Duration element

    // Function to update the displayed song information
    function updateSongInfo() {
        currentSongElement.textContent = songs[currentSongIndex]
            ? songs[currentSongIndex].displayName
            : "None";
        nextSongElement.textContent = songs[currentSongIndex + 1]
            ? songs[currentSongIndex + 1].displayName
            : "None";
    }

    // Function to format time (in seconds) as mm:ss
    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secondsLeft = Math.floor(seconds % 60);
        return `${minutes}:${secondsLeft < 10 ? '0' : ''}${secondsLeft}`;
    }

    // Function to play the next song
    function playNextSong() {
        if (currentSongIndex < songs.length) {
            audio.src = songs[currentSongIndex].file;
            audio.play();
            updateSongInfo(); // Update the displayed song information
            statusElement.textContent = "Playing"; // Set status to "Playing"
            currentSongIndex++;
            // Update the duration when the song starts
            audio.addEventListener('loadedmetadata', () => {
                durationElement.textContent = formatTime(audio.duration);
            });
        } else {
            currentSongIndex = 0; // Reset to the first song
            updateSongInfo(); // Update song info when loop resets
            statusElement.textContent = "Stopped"; // Set status to "Stopped"
        }
    }

    // Toggle mute/unmute functionality
    function toggleMute() {
        isMuted = !isMuted;
        audio.muted = isMuted;
        alert(isMuted ? "Muted" : "Unmuted");
    }

    // Listen for keyboard events
    document.addEventListener("keydown", (event) => {
        if (event.code === "Space") {
            event.preventDefault(); // Prevent scrolling with spacebar
            if (!audio.paused) {
                audio.pause();
                statusElement.textContent = "Paused"; // Set status to "Paused"
            } else {
                playNextSong();
            }
        } else if (event.code === "KeyM") {
            toggleMute(); // Toggle mute when "M" is pressed
        }
    });

    // Prevent automatic play of the next song when the current one ends
    audio.addEventListener("ended", () => {
        statusElement.textContent = "Song Finished"; // Set status to "Song Finished"
        audio.pause(); // Pause the audio explicitly
    });

    // Update the current time every second
    audio.addEventListener('timeupdate', () => {
        currentTimeElement.textContent = formatTime(audio.currentTime);
    });

    // Get the volume control slider element
    const volumeControl = document.getElementById("volumeControl");

    // Update audio volume when the slider value changes
    volumeControl.addEventListener("input", (event) => {
        audio.volume = event.target.value; // Set volume based on slider value
    });

    // Initialize the displayed song info
    updateSongInfo();
</script>
</body>
</html>
